<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Use Case Simulation — SustainAlign</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { sblue:'#D7EEF7', sblue600:'#3B97C1', sgreen:'#E8F8EE', sgreen600:'#4FB48E', accent:'#6EC5C5' } } } };
  </script>
  <style>
    :root{--glass-bg:rgba(255,255,255,.42);} .glass{background:var(--glass-bg);backdrop-filter:blur(8px);}
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Helvetica Neue", monospace; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-sblue to-sgreen text-slate-800 antialiased">

  <div id="nav-slot"></div>

  <main class="max-w-6xl mx-auto p-6 space-y-6">
    <section class="glass p-6 rounded-xl shadow">
      <div class="flex items-start justify-between">
        <div>
          <h1 class="text-2xl font-bold">Use Case Simulation</h1>
          <p class="text-sm text-slate-600 mt-1">Simulasikan 2 skenario utama dari proposal: <strong>Normal Compliance (Tekstil)</strong> dan <strong>Crisis — Kebocoran Limbah B3</strong>. Flow disimulasikan langkah demi langkah untuk demo pitching.</p>
        </div>
        <div class="text-sm text-slate-600">
          <a href="/mnt/data/PROPOSAL_SOLVIA_REGULATORY INTEGRATION FOR SUSTAINABILITY_SUSTAINALIGN, SISTEM PENYELARASAN REGULASI LOKAL DAN GLOBAL UNTUK KEPATUHAN KEBERLANJUTAN PERUSAHAAN.docx" target="_blank" class="underline text-sblue600">Proposal (local)</a>
        </div>
      </div>

      <div class="mt-6 grid md:grid-cols-3 gap-4">
        <div class="col-span-2">
          <div class="p-4 rounded-xl bg-white/60">
            <h4 class="font-semibold">Pick a Use Case</h4>
            <div class="mt-4 flex gap-3">
              <button id="runCompliance" class="px-4 py-2 rounded-lg bg-sgreen600 text-white">Run Use Case: Compliance Flow (Tekstil)</button>
              <button id="runCrisis" class="px-4 py-2 rounded-lg bg-sblue600 text-white">Run Use Case: Crisis Flow (Kebocoran Limbah)</button>
              <button id="resetSim" class="px-3 py-2 rounded-lg border">Reset</button>
            </div>

            <div class="mt-6">
              <h5 class="font-semibold">Simulation Controls</h5>
              <div class="mt-3 text-sm text-slate-600">Speed: <input id="simSpeed" type="range" min="0.5" max="2" step="0.1" value="1" /></div>
            </div>
          </div>

          <div class="mt-6 p-4 rounded-xl bg-white/60">
            <h4 class="font-semibold">Simulation Timeline</h4>
            <div id="simTimeline" class="mt-3 text-sm text-slate-700 max-h-80 overflow-auto mono"></div>
          </div>

        </div>

        <aside class="glass p-4 rounded-xl">
          <h4 class="font-semibold">Live State</h4>
          <div class="mt-3 text-sm text-slate-700">
            <p>Current step: <span id="currentStep" class="font-semibold">—</span></p>
            <p class="mt-2">Sim status: <span id="simStatus" class="font-semibold text-sblue600">idle</span></p>
          </div>

          <div class="mt-4">
            <h5 class="font-semibold">Outputs</h5>
            <div id="simOutputs" class="mt-3 space-y-2 text-sm"></div>
          </div>

          <div class="mt-4">
            <button id="exportSim" class="w-full px-3 py-2 rounded-lg bg-accent text-white">Export Simulation Report</button>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <div id="footer-slot"></div>

  <script type="module">
    import { injectLayout } from "../shared/components.js";
    try { injectLayout(); } catch(e) {}

    import initUseCaseSim from "./use-case-simulation.js";

    // initialize module, pointing to element selectors
    initUseCaseSim({
      btnCompliance: '#runCompliance',
      btnCrisis: '#runCrisis',
      resetBtn: '#resetSim',
      timeline: '#simTimeline',
      currentStep: '#currentStep',
      simStatus: '#simStatus',
      outputs: '#simOutputs',
      speed: '#simSpeed',
      exportBtn: '#exportSim'
    });
  </script>
</body>
</html>
