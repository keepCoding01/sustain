<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Real-Time Regulatory Update — SustainAlign</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { sblue:'#D7EEF7', sblue600:'#3B97C1', sgreen:'#E8F8EE', sgreen600:'#4FB48E', accent:'#6EC5C5' } } } };
  </script>
  <style>
    :root{--glass-bg:rgba(255,255,255,.42);} .glass{background:var(--glass-bg);backdrop-filter:blur(8px);}
    .fade{transition:all .32s cubic-bezier(.2,.9,.3,1);}
    .badge {background:#ffedd5;color:#7c2d12;padding:.18rem .5rem;border-radius:999px;font-weight:600}
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-sblue to-sgreen text-slate-800 antialiased">

<div id="nav-slot"></div>

<main class="max-w-6xl mx-auto p-6 space-y-6">
  <section class="glass p-5 rounded-xl shadow">
    <div class="flex items-start justify-between">
      <div>
        <h1 class="text-2xl font-bold">Real-Time Regulatory Update</h1>
        <p class="text-sm text-slate-600 mt-1">Mock auto-crawl & update feed — menampilkan update regulasi terbaru (simulated).</p>
      </div>
      <div class="text-sm text-slate-600">
        <a href="/mnt/data/PROPOSAL_SOLVIA_REGULATORY INTEGRATION FOR SUSTAINABILITY_SUSTAINALIGN, SISTEM PENYELARASAN REGULASI LOKAL DAN GLOBAL UNTUK KEPATUHAN KEBERLANJUTAN PERUSAHAAN.docx" target="_blank" class="underline text-sblue600">Proposal (local)</a>
      </div>
    </div>

    <div class="mt-4 flex gap-3 items-center">
      <button id="checkNow" class="px-4 py-2 rounded-lg bg-sblue600 text-white">Check new regulations</button>
      <button id="clearFeed" class="px-3 py-2 rounded-lg border">Clear Feed</button>
      <button id="exportFeed" class="px-3 py-2 rounded-lg bg-sgreen600 text-white">Export Feed JSON</button>

      <label class="ml-4 inline-flex items-center gap-2 text-sm">
        <input id="autoPoll" type="checkbox" /> Auto-poll
      </label>
      <div id="notifBadge" class="ml-auto hidden badge">New</div>
    </div>
  </section>

  <section class="glass p-4 rounded-xl shadow grid lg:grid-cols-3 gap-4">
    <div class="col-span-2">
      <h3 class="font-semibold">Update Feed</h3>
      <div id="feedList" class="mt-3 space-y-3 max-h-[420px] overflow-auto"></div>
    </div>

    <aside class="p-4 bg-white/80 rounded-xl">
      <h4 class="font-semibold">Crawler Log</h4>
      <div id="crawlLog" class="mt-3 text-sm text-slate-700 max-h-64 overflow-auto"></div>

      <div class="mt-4">
        <h5 class="font-semibold">Last Checked</h5>
        <div id="lastChecked" class="text-sm text-slate-600 mt-1">-</div>
      </div>
    </aside>
  </section>
</main>

<div id="footer-slot"></div>

<script type="module">
  import { injectLayout } from "../shared/components.js";
  try { injectLayout(); } catch(e) {}

  import initRealTimeUpdates from "../updates/real-time-updates.js";

  // init with selectors
  initRealTimeUpdates({
    checkBtn: '#checkNow',
    clearBtn: '#clearFeed',
    feedList: '#feedList',
    crawlLog: '#crawlLog',
    lastChecked: '#lastChecked',
    autoPoll: '#autoPoll',
    notifBadge: '#notifBadge'
  });
</script>
</body>
</html>
